<body>
  <style>
    .category {
      width: 80%;
      max-width: 1100px;
      display: flex;
      flex-direction: column;
      margin: auto;
    }
    .category header h2:first-child {
      text-align: center;
      background: rgb(79, 184, 184);
      display: inline-block;
      padding: 4px;
      width: 100%;
    }

    header.row {
      border: 0 none;
      color: #fff;
      padding: 0;
      margin-bottom: 1rem;
      position: relative;
      z-index: 10;
      cursor: pointer;
    }

    .category-products {
      overflow: hidden;
      height: 4rem;
      transition: 1s;
    }

    .category-products.expanded {
      height: auto;
    }
    div.row {
      overflow: hidden;
      height: 0;
      transition: 1s;
      filter: opacity(0);
    }

    .expanded div.row {
      overflow: visible;
      height: 5.5rem;
      filter: opacity(1);
    }

    .row {
      display: flex;
      justify-content: space-between;
      align-content: center;
      align-items: center;
      border: #ddd solid 1px;
      margin-bottom: 3rem;
    }

    .row h3 {
      margin: 0;
    }

    header.row h2::after {
      content: '>';
      transform: rotate(90deg);
      display: inline-block;
      margin-left: 1rem;
      font-size: 1rem;
      vertical-align: middle;
      font-stretch: ultra-expanded;
      width: 1.5rem;
      transition: 0.2s;
    }

    .expanded header.row h2::after {
      transform: rotate(-90deg);
    }

    .category img {
      position: absolute;
      height: 110px;
      top: -15px;
      max-width: 100%;
      object-fit: contain;
    }
    .image-cell {
      min-width: 90px;
      flex: 1;
      position: relative;
      display: block;
      /* background: #848; */
      width: 100%;
      height: 80px;
    }
    .product-info,
    .product-specs {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-content: flex-start;
      flex: 4;
      margin: 1rem;
    }
    .product-info {
      border-right: 1px #888 dotted;
    }
  </style>



<style>
.show {
    width: 80%;
    /* max-width: 400px; */
  }

  .product-details-modal {
    position: absolute;
    width: 100vw;
    /* width: 0; */
    height: 0;
    left: 0;
    top: 0;
    overflow: auto;
    background: #fff;
    z-index: 10;
    filter: opacity(0);
    transition: 0.5s;
    padding: 0;
    box-sizing: border-box;
  }

  .product-details-modal.show {
    width: 100vw;
    height: 100vh;
    /* max-width: 650px;   */
    filter: opacity(1);
    border: 1rem rgba(0, 0, 0, 0.4) solid;
    padding: 2rem;
  }

  aside {
    color: rgb(94, 94, 94);
    font-family: Montserrat, arial, sans-serif;
    font-size: 16px;
    font-weight: 400;
    line-height: 24px;
    margin: 1rem auto 1rem;
    width: 80%;
  }

  .unit-name {
    margin-bottom: 2rem;
  }

  .unit-name b {
    font-size: 1.2rem;
    font-weight: 800;
  }

  .unit-tonnage {
    font-size: 1.1rem;
    font-weight: 400;
  }

  .unit-seer {
    font-size: 1.1rem;
    font-weight: 400;
  }

  .unit-image {
    float: left;
    margin-right: 3rem;
  }

  .product-details-modal {
    border: 1px solid #00f;
  }
  .product-details {
    position: relative;
  }

  .close-modal {
    position: absolute;
    right: 1rem;
    top: 1rem;
    padding: 0.5rem;
    background: #00aeef;
    color: #fff;
  }

  .phone-button {
    background: #007fb0;
    color: #fff;
    padding: 0.5rem;
    border-radius: 4px;
    margin: 0 1rem 1rem 1rem;
  }
</style>



  <div class="category">
    <div class="product-rows-box"></div>



  



  </div>

  <script>
    'use strict';

    var products = [
      {
        category: 'Air Conditioners',
        items: [
          {
            img: 'https://rynoproducts.com/images/products/xc25-thumb.jpg',
            name: 'Air Conditioner #1',
            desc: 'Description of the First product.',
            seer: '26',
            btu: 'xx',
            details: {
              model: 'XC25',
              longDesc: `<p>The Lennox XC25 is a variable-capacity air conditioner. It is considered the most precise and efficient ac unit you can buy! Precise Comfort® technology adjusts cooling output in increments as small as 1%, perfectly matching your energy use with your comfort.</p> 
              <p>SilentComfort™ technology make it 50% quieter than a standard air conditioner! </p>`
            }
          },
          {
            img: 'https://rynoproducts.com/images/products/xc21-thumb.jpg',
            name: 'Air Conditioner #2',
            seer: '28',
            btu: 'yy'
          },
          {
            img:
              'https://rynoproducts.com/images/products/icomfort-e30-thumb.jpg',
            name: 'Air Conditioner #3',
            desc: 'This is air conditioner number 3.',
            seer: '30',
            btu: 'zz'
          }
        ]
      },
      {
        category: 'Heat Pumps',
        items: [
          {
            img: 'https://rynoproducts.com/images/products/xp20-thumb.jpg',
            name: 'Heat Pump #1',
            desc: 'Description of the First heat pump.',
            seer: '26',
            btu: 'ww'
          }
        ]
      }
    ];

    var makeProductsHTML = function makeProductsHTML(productDtls) {
      var $img = productDtls.img,
        img = $img === void 0 ? '' : $img,
        $name = productDtls.name,
        name = $name === void 0 ? '' : $name,
        $desc = productDtls.desc,
        desc = $desc === void 0 ? '' : $desc,
        $seer = productDtls.seer,
        seer = $seer === void 0 ? '' : $seer,
        $btu = productDtls.btu,
        btu = $btu === void 0 ? '' : $btu,
        $details = productDtls.details,
        details = $details === void 0 ? '' : $details;
      return '\n    <div class="row">\n        <div class="image-cell">\n            '
        .concat(
          img ? '<img src="' + img + '" />' : '',
          '\n        </div>\n        <section class="product-info">\n          <h3 class="product-name">'
        )
        .concat(name, '</h3>\n          <div class="product-description">')
        .concat(
          desc,
          '</div>\n        </section>\n        <section class="product-specs">\n          <div class="product-seer">SEER: '
        )
        .concat(seer, '</div>\n          <div class="product-btu">BTU: ')
        .concat(btu, '</div>\n        </section>\n      </div>\n    ')
        .concat('<div class="product-details-modal"> <button class="close-modal">X</button>         <div class="product-details">' + (img ? '<img src="' + img + '" />' : '') + 'Details:\n Model: ', details.model)
        .concat('\n'+details.longDesc, '</div></div>');
    };

    var productsHTML = products.reduce(function(categoryList, category) {
      return (
        categoryList +
        ('\n      <div class="category-products">\n      <header class="row">\n      <h2>'.concat(
          category.category,
          '</h2>\n    </header>\n      '
        ) +
          category.items.reduce(function(productsList, product) {
            return productsList + makeProductsHTML(product);
          }, '') +
          '</div>')
      );
    }, '');
    var productRowsBox = document.querySelector('.product-rows-box');
    productRowsBox.innerHTML = productsHTML;
    
    var categoryHeaders = document.querySelectorAll('header.row');
    categoryHeaders.forEach(function(header) {
      header.addEventListener('click', function(e) {
        e.currentTarget.parentElement.classList.toggle('expanded');
      });
    });




    const d = document,
    unitName = d.querySelector('.unit-name'),
    unitTonnage = d.querySelector('.unit-tonnage'),
    unitSeer = d.querySelector('.unit-seer'),
    unitImage = d.querySelector('.unit-image'),
    unitBtu = d.querySelector('.unit-btu'),
    step1 = d.querySelector('.step1'),
    step2 = d.querySelector('.step2'),
    step3 = d.querySelector('.step3'),
    closeModalButton = d.querySelectorAll('.close-modal'),
    detailsModal = d.querySelectorAll('.product-details-modal');



    const getRecommendation = () => {
    if (recommendedUnit.name) {
      unitName.innerHTML = `We recommend this model:<br /> <b>${
        recommendedUnit.name
      }</b>`;
    } else {
      unitName.textContent = '';
    }
    if (recommendedUnit.ton) {
      unitTonnage.textContent = `Tonnage: ${recommendedUnit.ton}`;
    } else {
      unitTonnage.textContent = '';
    }
    if (recommendedUnit.seer) {
      unitSeer.textContent = `SEER: ${recommendedUnit.seer}`;
    } else {
      unitSeer.textContent = '';
    }
    if (recommendedUnit.btu) {
      unitBtu.textContent = `BTU: ${recommendedUnit.btu}`;
    } else {
      unitBtu.textContent = '';
    }
    if (recommendedUnit.imgUrl) {
      unitImage.innerHTML = `<img src="${
        recommendedUnit.imgUrl ? recommendedUnit.imgUrl : 'images/no-image.png'
      }" alt="Image of the unit." />`;
    } else {
      unitImage.innerHTML = '';
    }
    recommendation.classList.add('show');
  };

  const closeModal = e => {
    console.log('close modal');
    e.currentTarget.classList.add('hey');

    e.currentTarget.parentElement.classList.remove('show');
  };

  // products.items.forEach(
  //   item => {
  //     getRecommendationk
  //   }
  // )

  var productRows = document.querySelectorAll('div.row');
    productRows.forEach(row=>{
      row.addEventListener('click', e=>{
        console.log('CLICK');
        e.currentTarget.nextElementSibling.classList.add('show');
      })
    })
  
  closeModalButton.forEach(
    btn => btn.addEventListener('click', closeModal)
    )
  </script>
</body>
